{"title":"How to build üê≥ Docker Image & run Container","markdown":{"yaml":{"title":"How to build üê≥ Docker Image & run Container","execute":{"enabled":false,"freeze":true},"date":"6/19/2024","categories":["docker"]},"headingText":"1. Build docker image","containsRefs":false,"markdown":"\n\n\n> Step by step guide on how to build docker image on VSCode and run docker container on Docker Desktop App\n\nIt is seldom that I needed to use docker to validate pre-production code, but when I do, I find myself always having to retrace my steps trying to learn how to use docker again. So here is step by step guide to remind myself:\n\n\n1. Open VSCode window, choose \"Open Folder\".\n1. Choose the directory where we store the pre-production code we want to test. Eg \"myfolder\" here.\n\n\n3. If not already exist, add .dockerignore. If the file we want to ignore is not in './myfolder' directory, we need to include full filepath.\n\n\n4. If not already exist, create .gitignore. Fill in any filenames that you want to exclude. If the file we want to ignore is not in './myfolder' directory, we need to include full filepath.\n\n5. If not already exist, create requirements.txt. We can automatically create one using terminal. In terminal:\n\n6. Create Dockerfile. Currently, below is the minimal working dockerfile we can use to test any pre-production code.\nThe last line `CMD [\"python3.8\", \"./newmodel_prediction.py\"]` means as soon as the container is running, run `python 3.8 ./newmodel_prediction.py`.\n\n\n7. Open up docker desktop apps.\n8. Build docker image. The easiest way to create an image in VSCode:\n   1. Open up Dockerfile \n   2. In Dockerfile, right-click and select \"Build Image...\"\n      ![image.png](attachment:b89d1cfc-de0b-4e11-9ff8-4c4e0da012a0.png)\n   4. Look notice the \"myfolder:1\" in the command pallete. \"myfolder\" is there because it is the name of our current directory, this will become the default image name. \"1\" here is the default image tag. We can change both the image name and the tag if we wish, or just press enter to use the default.\n      ![image.png](attachment:2da4af29-e279-458e-b71e-2ef35cdc2333.png)\n   5. If there is no error, your terminal should look similar like so.\n      ![image.png](attachment:1254af47-6589-475b-bedb-720dcbe28a54.png)\n   6. Observe that we have newly created image in our docker desktop app.\n      ![image.png](attachment:f62f04a0-86ea-44c8-8b7a-b5485d956a0c.png)\n\n### 2. Create docker container & run\n\n1. Click on the newly created image.\n ![image.png](attachment:ca5addc6-6750-44df-90ea-85e7c35eb3c1.png)\n2. Set container name (optional). Add any environment variables if needed. The environment variables you included here will be used to run the container. (See docker <a href=\"https://docs.docker.com/compose/environment-variables/envvars-precedence/\">documentation</a> for environment variables precedence)\n    ![image.png](attachment:f125ed35-218f-4468-a482-aaf8ae4371c2.png)\n3. You will be directed to container tab. Notice the container name \"testrun1\", image name and tag \"myfolder:1\".You can confirm that the container is currently running when the play button ‚ñ∂Ô∏è on the right hand corner is grayed out. You can stop the container by clicking on the stop button ‚èπ.\nSince we created our ended our Dockerfile with `CMD [\"python3.8\", \"./newmodel_prediction.py\"]`, this means it will directly run the specified file. However, we could also manually run anything through the terminal should we wish, like so.\n   ![image.png](attachment:05fc3de4-0135-4f9e-a6b2-53770b0af23f.png)\n\nNote: Docker containers and images take up space. You might want to delete them if unused.\n","srcMarkdownNoYaml":"\n\n\n> Step by step guide on how to build docker image on VSCode and run docker container on Docker Desktop App\n\nIt is seldom that I needed to use docker to validate pre-production code, but when I do, I find myself always having to retrace my steps trying to learn how to use docker again. So here is step by step guide to remind myself:\n\n### 1. Build docker image\n\n1. Open VSCode window, choose \"Open Folder\".\n1. Choose the directory where we store the pre-production code we want to test. Eg \"myfolder\" here.\n\n\n3. If not already exist, add .dockerignore. If the file we want to ignore is not in './myfolder' directory, we need to include full filepath.\n\n\n4. If not already exist, create .gitignore. Fill in any filenames that you want to exclude. If the file we want to ignore is not in './myfolder' directory, we need to include full filepath.\n\n5. If not already exist, create requirements.txt. We can automatically create one using terminal. In terminal:\n\n6. Create Dockerfile. Currently, below is the minimal working dockerfile we can use to test any pre-production code.\nThe last line `CMD [\"python3.8\", \"./newmodel_prediction.py\"]` means as soon as the container is running, run `python 3.8 ./newmodel_prediction.py`.\n\n\n7. Open up docker desktop apps.\n8. Build docker image. The easiest way to create an image in VSCode:\n   1. Open up Dockerfile \n   2. In Dockerfile, right-click and select \"Build Image...\"\n      ![image.png](attachment:b89d1cfc-de0b-4e11-9ff8-4c4e0da012a0.png)\n   4. Look notice the \"myfolder:1\" in the command pallete. \"myfolder\" is there because it is the name of our current directory, this will become the default image name. \"1\" here is the default image tag. We can change both the image name and the tag if we wish, or just press enter to use the default.\n      ![image.png](attachment:2da4af29-e279-458e-b71e-2ef35cdc2333.png)\n   5. If there is no error, your terminal should look similar like so.\n      ![image.png](attachment:1254af47-6589-475b-bedb-720dcbe28a54.png)\n   6. Observe that we have newly created image in our docker desktop app.\n      ![image.png](attachment:f62f04a0-86ea-44c8-8b7a-b5485d956a0c.png)\n\n### 2. Create docker container & run\n\n1. Click on the newly created image.\n ![image.png](attachment:ca5addc6-6750-44df-90ea-85e7c35eb3c1.png)\n2. Set container name (optional). Add any environment variables if needed. The environment variables you included here will be used to run the container. (See docker <a href=\"https://docs.docker.com/compose/environment-variables/envvars-precedence/\">documentation</a> for environment variables precedence)\n    ![image.png](attachment:f125ed35-218f-4468-a482-aaf8ae4371c2.png)\n3. You will be directed to container tab. Notice the container name \"testrun1\", image name and tag \"myfolder:1\".You can confirm that the container is currently running when the play button ‚ñ∂Ô∏è on the right hand corner is grayed out. You can stop the container by clicking on the stop button ‚èπ.\nSince we created our ended our Dockerfile with `CMD [\"python3.8\", \"./newmodel_prediction.py\"]`, this means it will directly run the specified file. However, we could also manually run anything through the terminal should we wish, like so.\n   ![image.png](attachment:05fc3de4-0135-4f9e-a6b2-53770b0af23f.png)\n\nNote: Docker containers and images take up space. You might want to delete them if unused.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"output-file":"190624_howtodocker.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.45","theme":"cosmo","title":"How to build üê≥ Docker Image & run Container","date":"6/19/2024","categories":["docker"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}